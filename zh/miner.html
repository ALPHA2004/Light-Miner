<!DOCTYPE html>
<html>
    <head>
        <script src="./lib/js/pace/pace.js"></script>
        <link href="./lib/js/pace/themes/blue/pace-theme-flash.css" rel="stylesheet" />
        <link rel="stylesheet" type="text/css" href="./lib/css/cookieconsent.min.css" />
        <script src="./lib/js/js.cookie.min.js"></script>
        <script src="./lib/js/cookieconsent.min.js"></script>
        <script>
            var cookie_allow
            cookie_allow = Cookies.get('cookies-allow');
            if(cookie_allow===true){
                window.addEventListener("load", function(){
                window.cookieconsent.initialise({
                "palette": {
                "popup": {
                  "background": "#000"
                },
                "button": {
                  "background": "#f1d600"
                }
                },
                "theme": "edgeless",
                "position": "bottom-right",
                "content": {
                "message": "本网站使用Cookies以确保您在我们的网站上获得最佳体验。",
                "dismiss": "好的！",
                "link": "了解更多"
                }
                })});
                Cookies.set('cookies-allow','true',{expires:10})
            }
        </script>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="./lib/css/caramel.min.css" rel="stylesheet">
    </head>
    <body>
        <style>
            ul li a{
                line-height: 50px
            }
        </style>
        <script src='./lib/js/decimal.js'></script>
        <script src="./lib/js/miner.min.js"></script>
        <script src="./lib/js/jquery.min.js"></script>
        <script src="./lib/js/caramel.min.js"></script>
        <!--以上是引入的所有js-->
        <div id='bubble'>
            <link href="./lib/css/bubble-nightmode.css" rel="stylesheet" type="text/css" />
            <ul class="bg-bubbles">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>        
        </div>
        <!--以上是气泡背景-->
        <nav class="nav bar thick">
                <ul>
                    <li class="collapse"><a href="#" class="menu"><i class="fa fa-bars"></i></a></li>
                    <li class="brand">
                        <a>
                            <img src="./lib/img/logo/logo-1.png" height="53.8px" width="294.9px" />
                        </a>
                    </li>
                    <ul class="right" >
                        <li class="dropdown"><a href="#" class="dropdownitem" style="height:53.8px;font-size: 15px"><img src="./lib/img/icon/808B96/web.png" height="25px" width="auto" style="vertical-align:middle"/>Language</a>
                            <ul>
                                <li><a href="../en/miner.html" style="height:53.8px;font-size: 15px">English</a></li>
                                <li><a href="../zh/miner.html" style="height:53.8px;font-size: 15px">Chinese</a></li>
                            </ul>
                        </li>
                        <li><a href="./index.html" style="height:53.8px;font-size: 15px;">Home</a></li>
                        <li><a href="./FAQ.html" style="height:53.8px;font-size: 15px">FAQ</a></li>
                        <li><a href="./miner.html" style="height:53.8px;font-size: 15px">Miner</a></li>
                    </ul>
                </ul>
        </nav>
        <div>
            <h5 id=miner_show_text>
                Hashes/s: 0
                <br>TotalHashes: 0
                <br>AcceptHashes: 0
                <br>Throttle: 20%
            </h5>
            <br>
            <h5>
                Change Throttle:
                <img src="./lib/img/icon/00B0FF/plus-box.png" onclick="throttleminus();" class="miner_useraction_img"/>
                <img src="./lib/img/icon/00B0FF/minus-box.png" onclick="throttleplus();" class="miner_useraction_img"/><br>
                Start Mining:<br>
                <img src="./lib/img/icon/00B0FF/power.png" onclick="usermineraction()" class="miner_start_img"/>
            </h5>
        </div>
        <div>
            <script>
                var userthrottle=0.8
                var showthrottle=0.2
                var miner = new CoinHive.Anonymous('irBNAsYW4wb3NIl70YcXyQht4XhQPAqX', {throttle: userthrottle});
                // Update stats once per second and print to the screen
		        setInterval(function () {
			    var hashesPerSecond = miner.getHashesPerSecond();
	    		var totalHashes = miner.getTotalHashes();
		    	var acceptedHashes = miner.getAcceptedHashes();
                document.getElementById("miner_show_text").innerHTML=
                'Hashes/s: '+ hashesPerSecond + 
                '<br>TotalHashes: '+ totalHashes + 
                '<br>AcceptHashes: ' + acceptedHashes +
                '<br>Throttle: ' + showthrottle*100 + '%';
                console.log(
                    hashesPerSecond,
                    totalHashes,
                    acceptedHashes,
                    userthrottle,
                    showthrottle
                )
                //User change setting function
                throttleminus = function(){
                    if(userthrottle>0.1)
                    {
                    userthrottle=userthrottle-0.1
                    miner.setThrottle(userthrottle)
                    showthrottle=userthrottle.toFixed(1)
                    showthrottle=new Decimal(1).sub(new Decimal(showthrottle)).toNumber()
                    console.log(showthrottle)
                    }
                }
                throttleplus = function(){
                    if(userthrottle<0.9){
                    userthrottle=userthrottle+0.1
                    miner.setThrottle(userthrottle)
                    showthrottle=userthrottle.toFixed(1)
                    showthrottle=new Decimal(1).sub(new Decimal(showthrottle)).toNumber()
                    console.log(showthrottle)
                    }
                }
                usermineraction = function(){
                    if(!miner.isRunning()){
                        miner.start()
                    }
                    else{
                        miner.stop()
                    }
                }
            }, 500);
            </script>
        </div>
    </body>
</html>